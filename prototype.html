<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é¡µé¢æ­å»ºå¹³å°åŸå‹</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/5.15.1/reset.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.10/dayjs.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/5.15.1/antd.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- æ·»åŠ Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1890ff',
            success: '#52c41a',
            warning: '#faad14',
            error: '#f5222d',
            gray: {
              100: '#f5f5f5',
              200: '#f0f0f0',
              300: '#d9d9d9',
              400: '#bfbfbf',
              500: '#8c8c8c',
              600: '#595959',
              700: '#434343',
              800: '#262626',
              900: '#1f1f1f',
            }
          },
          boxShadow: {
            card: '0 1px 2px -2px rgba(0, 0, 0, 0.16), 0 3px 6px 0 rgba(0, 0, 0, 0.12), 0 5px 12px 4px rgba(0, 0, 0, 0.09)',
            sm: '0 1px 2px rgba(0,0,0,0.05)',
            md: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
            lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
          }
        }
      }
    }
  </script>
  
  <style>
    /* ä»…ä¿ç•™å¿…è¦çš„è‡ªå®šä¹‰æ ·å¼ï¼Œå…¶ä»–ä½¿ç”¨Tailwindç±»æ›¿ä»£ */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
    }
    .app-container {
      min-height: 100vh;
    }
    .app-header {
      background: #fff;
      padding: 0 24px;
      box-shadow: 0 1px 4px rgba(0,21,41,.08);
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: fixed;
      width: 100%;
      z-index: 100;
    }
    .app-logo {
      height: 48px;
      display: flex;
      align-items: center;
      font-size: 18px;
      font-weight: bold;
    }
    .app-content {
      padding: 88px 24px 24px;
      background: #f0f2f5;
      min-height: 100vh;
    }
    .phone-frame {
      width: 375px;
      height: 667px;
      margin: 0 auto;
      border: 10px solid #333;
      border-radius: 36px;
      overflow: hidden;
      position: relative;
    }
    .phone-content {
      width: 100%;
      height: 100%;
      background: white;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script type="text/babel" data-presets="env,react">
    const { 
      Layout, Menu, Breadcrumb, Typography, Tabs, Card, 
      Form, Input, Select, Button, Table, Tag, Switch,
      Upload, message, Dropdown, Space, Modal, Divider,
      Descriptions, Slider, InputNumber, Radio
    } = antd;
    
    const { Header, Content, Sider } = Layout;
    const { Title, Text, Paragraph } = Typography;
    const { Option } = Select;
    
    // ä¸»åº”ç”¨ç»„ä»¶
    const App = () => {
      const [activeTab, setActiveTab] = React.useState('1');
      const [activeMenu, setActiveMenu] = React.useState('1');
      const [breadcrumbItems, setBreadcrumbItems] = React.useState(['é¦–é¡µ', 'è¿è¥é—¨æˆ·']);
      
      // å¤„ç†èœå•ç‚¹å‡»äº‹ä»¶
      const handleMenuClick = (e) => {
        setActiveMenu(e.key);
        
        // æ ¹æ®ç‚¹å‡»çš„èœå•é¡¹æ›´æ–°é¢åŒ…å±‘å’Œå†…å®¹
        if (e.key === '1') {
          setBreadcrumbItems(['é¦–é¡µ', 'è¿è¥é—¨æˆ·']);
          setActiveTab('1');
        } else if (e.key === '2') {
          setBreadcrumbItems(['é¦–é¡µ', 'ç”¨æˆ·å‰ç«¯é¢„è§ˆ']);
          // è‡ªåŠ¨åˆ‡æ¢åˆ°é¡µé¢é¢„è§ˆé€‰é¡¹å¡
          setActiveTab('6');
        } else if (e.key === '3') {
          setBreadcrumbItems(['é¦–é¡µ', 'ç³»ç»Ÿç®¡ç†']);
          message.info('ç³»ç»Ÿç®¡ç†åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­');
        }
      };
      
      return (
        <Layout className="app-container">
          <Header className="app-header">
            <div className="app-logo">é¡µé¢æ­å»ºå¹³å°</div>
            <Menu mode="horizontal" selectedKeys={[activeMenu]} onClick={handleMenuClick}>
              <Menu.Item key="1">è¿è¥é—¨æˆ·</Menu.Item>
              <Menu.Item key="2">ç”¨æˆ·å‰ç«¯é¢„è§ˆ</Menu.Item>
              <Menu.Item key="3">ç³»ç»Ÿç®¡ç†</Menu.Item>
            </Menu>
          </Header>
          <Content className="app-content">
            <Breadcrumb className="mb-4">
              {breadcrumbItems.map((item, index) => (
                <Breadcrumb.Item key={index}>{item}</Breadcrumb.Item>
              ))}
            </Breadcrumb>
            
            <Tabs activeKey={activeTab} onChange={setActiveTab} className="mb-6">
              <Tabs.TabPane tab="æ ‡ç­¾æ¨¡å‹ç®¡ç†" key="1">
                <TagModelManagement />
              </Tabs.TabPane>
              <Tabs.TabPane tab="æ•°æ®æºç®¡ç†" key="2">
                <DataSourceManagement />
              </Tabs.TabPane>
              <Tabs.TabPane tab="ç»„ä»¶é…ç½®" key="3">
                <ComponentConfiguration />
              </Tabs.TabPane>
              <Tabs.TabPane tab="AIå†…å®¹ç”Ÿæˆé…ç½®" key="4">
                <AIContentConfiguration />
              </Tabs.TabPane>
              <Tabs.TabPane tab="é¡µé¢ç»„è£…" key="5">
                <PageAssembly />
              </Tabs.TabPane>
              <Tabs.TabPane tab="é¡µé¢é¢„è§ˆ" key="6">
                <PagePreview />
              </Tabs.TabPane>
            </Tabs>
          </Content>
        </Layout>
      );
    };
    
    // æ ‡ç­¾æ¨¡å‹ç®¡ç†
    const TagModelManagement = () => {
      const [tagModels, setTagModels] = React.useState([
        {
          id: 1,
          name: 'ç”¨æˆ·ä¿¡æ¯',
          description: 'ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ ‡ç­¾ç»„',
          tags: [
            { name: 'å§“å', type: 'STRING', mappings: [{ dataSourceId: 'ds1', field: 'name' }, { dataSourceId: 'ds2', field: 'studentName' }] },
            { name: 'å¹´é¾„', type: 'NUMBER', mappings: [{ dataSourceId: 'ds1', field: 'age' }, { dataSourceId: 'ds2', field: 'userAge' }] },
            { name: 'å¤´åƒ', type: 'IMAGE', mappings: [{ dataSourceId: 'ds1', field: 'avatarUrl' }] }
          ]
        },
        {
          id: 2,
          name: 'å­¦ä¹ æ•°æ®',
          description: 'ç”¨æˆ·å­¦ä¹ ç›¸å…³æ•°æ®æ ‡ç­¾ç»„',
          tags: [
            { name: 'è¯¾ç¨‹åç§°', type: 'STRING', mappings: [{ dataSourceId: 'ds2', field: 'courseName' }] },
            { name: 'å­¦ä¹ è¿›åº¦', type: 'NUMBER', mappings: [{ dataSourceId: 'ds2', field: 'progress' }] }
          ]
        }
      ]);
      
      const [detailModalVisible, setDetailModalVisible] = React.useState(false);
      const [editModalVisible, setEditModalVisible] = React.useState(false);
      const [currentTagModel, setCurrentTagModel] = React.useState(null);
      const [form] = Form.useForm();
      
      // æŸ¥çœ‹æ ‡ç­¾æ¨¡å‹è¯¦æƒ…
      const showTagModelDetail = (record) => {
        setCurrentTagModel(record);
        setDetailModalVisible(true);
      };
      
      // ç¼–è¾‘æ ‡ç­¾æ¨¡å‹
      const showEditModal = (record) => {
        setCurrentTagModel(record);
        setEditModalVisible(true);
        // è®¾ç½®è¡¨å•åˆå§‹å€¼
        setTimeout(() => {
          form.setFieldsValue({
            name: record.name,
            description: record.description
          });
        }, 0);
      };
      
      // å¤„ç†ç¼–è¾‘è¡¨å•æäº¤
      const handleEditSubmit = () => {
        form.validateFields().then(values => {
          // æ›´æ–°æ ‡ç­¾æ¨¡å‹
          const newTagModels = tagModels.map(item => 
            item.id === currentTagModel.id ? { ...item, ...values } : item
          );
          setTagModels(newTagModels);
          setEditModalVisible(false);
          message.success('æ ‡ç­¾æ¨¡å‹å·²æ›´æ–°');
        });
      };
      
      // åˆ é™¤æ ‡ç­¾æ¨¡å‹
      const deleteTagModel = (id) => {
        Modal.confirm({
          title: 'ç¡®è®¤åˆ é™¤',
          content: 'ç¡®å®šè¦åˆ é™¤æ­¤æ ‡ç­¾æ¨¡å‹å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ã€‚',
          okText: 'ç¡®è®¤',
          cancelText: 'å–æ¶ˆ',
          onOk: () => {
            const newTagModels = tagModels.filter(item => item.id !== id);
            setTagModels(newTagModels);
            message.success('æ ‡ç­¾æ¨¡å‹å·²åˆ é™¤');
          }
        });
      };
      
      // æ·»åŠ æ–°æ ‡ç­¾æ¨¡å‹
      const handleAddTagModel = () => {
        setCurrentTagModel(null);
        form.resetFields();
        setEditModalVisible(true);
      };
      
      // åˆ›å»ºæˆ–æ›´æ–°æ ‡ç­¾æ¨¡å‹
      const handleSaveTagModel = () => {
        form.validateFields().then(values => {
          if (currentTagModel) {
            // æ›´æ–°ç°æœ‰æ ‡ç­¾æ¨¡å‹
            const newTagModels = tagModels.map(item => 
              item.id === currentTagModel.id ? { ...item, name: values.name, description: values.description } : item
            );
            setTagModels(newTagModels);
            message.success('æ ‡ç­¾æ¨¡å‹å·²æ›´æ–°');
          } else {
            // åˆ›å»ºæ–°æ ‡ç­¾æ¨¡å‹
            const newTagModel = {
              id: tagModels.length > 0 ? Math.max(...tagModels.map(item => item.id)) + 1 : 1,
              name: values.name,
              description: values.description,
              tags: []
            };
            setTagModels([...tagModels, newTagModel]);
            message.success('æ ‡ç­¾æ¨¡å‹å·²åˆ›å»º');
          }
          setEditModalVisible(false);
        });
      };
      
      const columns = [
        {
          title: 'æ ‡ç­¾æ¨¡å‹åç§°',
          dataIndex: 'name',
          key: 'name',
        },
        {
          title: 'æè¿°',
          dataIndex: 'description',
          key: 'description',
        },
        {
          title: 'æ ‡ç­¾æ•°é‡',
          key: 'tagCount',
          render: (_, record) => record.tags.length
        },
        {
          title: 'æ“ä½œ',
          key: 'action',
          render: (_, record) => (
            <Space size="middle">
              <a onClick={() => showTagModelDetail(record)}>æŸ¥çœ‹</a>
              <a onClick={() => showEditModal(record)}>ç¼–è¾‘</a>
              <a onClick={() => deleteTagModel(record.id)}>åˆ é™¤</a>
            </Space>
          ),
        },
      ];
      
      return (
        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex justify-between items-center mb-4">
            <Title level={4}>æ ‡ç­¾æ¨¡å‹ç®¡ç†</Title>
            <Button type="primary" onClick={handleAddTagModel}>æ–°å»ºæ ‡ç­¾æ¨¡å‹</Button>
          </div>
          <Paragraph>
            æ ‡ç­¾æ¨¡å‹ç”¨äºå®šä¹‰ä¸šåŠ¡æ•°æ®å±æ€§ï¼Œæ”¯æŒåœ¨ä¸åŒæ•°æ®æºä¸Šå®šä¹‰çµæ´»çš„å­—æ®µæ˜ å°„ã€‚
          </Paragraph>
          <Table 
            dataSource={tagModels} 
            columns={columns} 
            rowKey="id"
            expandable={{
              expandedRowRender: record => (
                <div style={{ margin: 0 }}>
                  <Table 
                    columns={[
                      { title: 'æ ‡ç­¾åç§°', dataIndex: 'name', key: 'name' },
                      { title: 'æ•°æ®ç±»å‹', dataIndex: 'type', key: 'type' },
                      { 
                        title: 'å­—æ®µæ˜ å°„', 
                        key: 'mappings',
                        render: (_, record) => (
                          <div>
                            {record.mappings.map((mapping, index) => (
                              <div key={index}>{mapping.dataSourceId}: {mapping.field}</div>
                            ))}
                          </div>
                        )
                      }
                    ]}
                    dataSource={record.tags}
                    pagination={false}
                  />
                </div>
              ),
            }}
          />
          
          {/* è¯¦æƒ…æ¨¡æ€æ¡† */}
          <Modal
            title="æ ‡ç­¾æ¨¡å‹è¯¦æƒ…"
            open={detailModalVisible}
            onCancel={() => setDetailModalVisible(false)}
            footer={[
              <Button key="close" onClick={() => setDetailModalVisible(false)}>
                å…³é—­
              </Button>
            ]}
            width={800}
          >
            {currentTagModel && (
              <React.Fragment>
                <Descriptions title={currentTagModel.name} bordered>
                  <Descriptions.Item label="ID" span={3}>{currentTagModel.id}</Descriptions.Item>
                  <Descriptions.Item label="æè¿°" span={3}>{currentTagModel.description}</Descriptions.Item>
                  <Descriptions.Item label="æ ‡ç­¾æ•°é‡" span={3}>{currentTagModel.tags.length}</Descriptions.Item>
                </Descriptions>
                
                <Divider orientation="left">æ ‡ç­¾åˆ—è¡¨</Divider>
                
                <Table 
                  columns={[
                    { title: 'æ ‡ç­¾åç§°', dataIndex: 'name', key: 'name' },
                    { title: 'æ•°æ®ç±»å‹', dataIndex: 'type', key: 'type' },
                    { 
                      title: 'å­—æ®µæ˜ å°„', 
                      key: 'mappings',
                      render: (_, record) => (
                        <div>
                          {record.mappings.map((mapping, index) => (
                            <div key={index}>{mapping.dataSourceId}: {mapping.field}</div>
                          ))}
                        </div>
                      )
                    }
                  ]}
                  dataSource={currentTagModel.tags}
                  pagination={false}
                />
              </React.Fragment>
            )}
          </Modal>
          
          {/* ç¼–è¾‘/åˆ›å»ºæ¨¡æ€æ¡† */}
          <Modal
            title={currentTagModel ? "ç¼–è¾‘æ ‡ç­¾æ¨¡å‹" : "æ–°å»ºæ ‡ç­¾æ¨¡å‹"}
            open={editModalVisible}
            onCancel={() => setEditModalVisible(false)}
            onOk={handleSaveTagModel}
            destroyOnClose={true}
          >
            <Form
              form={form}
              layout="vertical"
            >
              <Form.Item
                name="name"
                label="æ ‡ç­¾æ¨¡å‹åç§°"
                rules={[{ required: true, message: 'è¯·è¾“å…¥æ ‡ç­¾æ¨¡å‹åç§°' }]}
              >
                <Input placeholder="è¯·è¾“å…¥æ ‡ç­¾æ¨¡å‹åç§°" />
              </Form.Item>
              <Form.Item
                name="description"
                label="æè¿°"
                rules={[{ required: true, message: 'è¯·è¾“å…¥æ ‡ç­¾æ¨¡å‹æè¿°' }]}
              >
                <Input.TextArea rows={4} placeholder="è¯·è¾“å…¥æ ‡ç­¾æ¨¡å‹æè¿°" />
              </Form.Item>
            </Form>
          </Modal>
        </div>
      );
    };
    
    // æ•°æ®æºç®¡ç†
    const DataSourceManagement = () => {
      const [dataSources, setDataSources] = React.useState([
        { id: 'ds1', name: 'ç”¨æˆ·ç³»ç»Ÿ', type: 'MySQL', status: 'active', connectionString: 'jdbc:mysql://host:3306/users' },
        { id: 'ds2', name: 'å­¦ä¹ å¹³å°', type: 'REST API', status: 'active', connectionString: 'https://api.learning.com/v1' }
      ]);
      
      const [editModalVisible, setEditModalVisible] = React.useState(false);
      const [currentDataSource, setCurrentDataSource] = React.useState(null);
      const [form] = Form.useForm();
      
      // æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†
      const showEditModal = (record) => {
        setCurrentDataSource(record);
        setEditModalVisible(true);
        // è®¾ç½®è¡¨å•åˆå§‹å€¼
        setTimeout(() => {
          form.setFieldsValue(record);
        }, 0);
      };
      
      // å¤„ç†ç¼–è¾‘è¡¨å•æäº¤
      const handleEditSubmit = () => {
        form.validateFields().then(values => {
          // æ›´æ–°æ•°æ®æº
          const newDataSources = dataSources.map(item => 
            item.id === currentDataSource.id ? { ...item, ...values } : item
          );
          setDataSources(newDataSources);
          setEditModalVisible(false);
          message.success('æ•°æ®æºå·²æ›´æ–°');
        });
      };
      
      // æµ‹è¯•è¿æ¥
      const testConnection = (record) => {
        message.loading('æ­£åœ¨æµ‹è¯•è¿æ¥...', 1.5).then(() => {
          message.success('è¿æ¥æˆåŠŸï¼');
        });
      };
      
      // åˆ é™¤æ•°æ®æº
      const deleteDataSource = (id) => {
        Modal.confirm({
          title: 'ç¡®è®¤åˆ é™¤',
          content: 'ç¡®å®šè¦åˆ é™¤æ­¤æ•°æ®æºå—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ã€‚',
          okText: 'ç¡®è®¤',
          cancelText: 'å–æ¶ˆ',
          onOk: () => {
            const newDataSources = dataSources.filter(item => item.id !== id);
            setDataSources(newDataSources);
            message.success('æ•°æ®æºå·²åˆ é™¤');
          }
        });
      };
      
      // æ·»åŠ æ–°æ•°æ®æº
      const handleAddDataSource = () => {
        setCurrentDataSource(null);
        form.resetFields();
        setEditModalVisible(true);
      };
      
      // åˆ›å»ºæˆ–æ›´æ–°æ•°æ®æº
      const handleSaveDataSource = () => {
        form.validateFields().then(values => {
          if (currentDataSource) {
            // æ›´æ–°ç°æœ‰æ•°æ®æº
            const newDataSources = dataSources.map(item => 
              item.id === currentDataSource.id ? { ...item, ...values } : item
            );
            setDataSources(newDataSources);
            message.success('æ•°æ®æºå·²æ›´æ–°');
          } else {
            // åˆ›å»ºæ–°æ•°æ®æº
            const newDataSource = {
              id: `ds${dataSources.length + 1}`,
              status: 'active',
              ...values
            };
            setDataSources([...dataSources, newDataSource]);
            message.success('æ•°æ®æºå·²åˆ›å»º');
          }
          setEditModalVisible(false);
        });
      };
      
      const columns = [
        {
          title: 'æ•°æ®æºID',
          dataIndex: 'id',
          key: 'id',
        },
        {
          title: 'æ•°æ®æºåç§°',
          dataIndex: 'name',
          key: 'name',
        },
        {
          title: 'ç±»å‹',
          dataIndex: 'type',
          key: 'type',
        },
        {
          title: 'çŠ¶æ€',
          key: 'status',
          dataIndex: 'status',
          render: status => (
            <Tag color={status === 'active' ? 'green' : 'volcano'}>
              {status === 'active' ? 'å·²è¿æ¥' : 'æœªè¿æ¥'}
            </Tag>
          ),
        },
        {
          title: 'æ“ä½œ',
          key: 'action',
          render: (_, record) => (
            <Space size="middle">
              <a onClick={() => testConnection(record)}>æµ‹è¯•è¿æ¥</a>
              <a onClick={() => showEditModal(record)}>ç¼–è¾‘</a>
              <a onClick={() => deleteDataSource(record.id)}>åˆ é™¤</a>
            </Space>
          ),
        },
      ];
      
      return (
        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex justify-between items-center mb-4">
            <Title level={4}>æ•°æ®æºç®¡ç†</Title>
            <Button type="primary" onClick={handleAddDataSource}>æ–°å»ºæ•°æ®æº</Button>
          </div>
          <Paragraph>
            æ•°æ®æºç®¡ç†ç”¨äºè¿æ¥ä¸šåŠ¡æ•°æ®ï¼Œæ”¯æŒä¸ºæ¯ä¸ªæ•°æ®æºä¸Šçš„æ ‡ç­¾å®šä¹‰ç‰¹å®šçš„å­—æ®µæ˜ å°„ã€‚
          </Paragraph>
          <Table 
            dataSource={dataSources} 
            columns={columns} 
            rowKey="id" 
          />
          
          <Modal
            title={currentDataSource ? "ç¼–è¾‘æ•°æ®æº" : "æ–°å»ºæ•°æ®æº"}
            open={editModalVisible}
            onCancel={() => setEditModalVisible(false)}
            onOk={handleSaveDataSource}
            destroyOnClose={true}
          >
            <Form
              form={form}
              layout="vertical"
              initialValues={currentDataSource || {}}
            >
              <Form.Item
                name="name"
                label="æ•°æ®æºåç§°"
                rules={[{ required: true, message: 'è¯·è¾“å…¥æ•°æ®æºåç§°' }]}
              >
                <Input placeholder="è¯·è¾“å…¥æ•°æ®æºåç§°" />
              </Form.Item>
              <Form.Item
                name="type"
                label="æ•°æ®æºç±»å‹"
                rules={[{ required: true, message: 'è¯·é€‰æ‹©æ•°æ®æºç±»å‹' }]}
              >
                <Select placeholder="è¯·é€‰æ‹©æ•°æ®æºç±»å‹">
                  <Option value="MySQL">MySQL</Option>
                  <Option value="PostgreSQL">PostgreSQL</Option>
                  <Option value="REST API">REST API</Option>
                  <Option value="GraphQL">GraphQL</Option>
                </Select>
              </Form.Item>
              <Form.Item
                name="connectionString"
                label="è¿æ¥å­—ç¬¦ä¸²"
                rules={[{ required: true, message: 'è¯·è¾“å…¥è¿æ¥å­—ç¬¦ä¸²' }]}
              >
                <Input placeholder="è¯·è¾“å…¥è¿æ¥å­—ç¬¦ä¸²" />
              </Form.Item>
            </Form>
          </Modal>
        </div>
      );
    };
    
    // ç»„ä»¶é…ç½®
    const ComponentConfiguration = () => {
      const [configModalVisible, setConfigModalVisible] = React.useState(false);
      const [currentComponentIndex, setCurrentComponentIndex] = React.useState(null);
      const [componentForm] = Form.useForm();
      const [components, setComponents] = React.useState([
        { id: 1, name: 'ä¸ªäººä¿¡æ¯ç»„ä»¶', type: 'PROFILE', description: 'æ˜¾ç¤ºç”¨æˆ·ä¸ªäººä¿¡æ¯å’Œæ¬¢è¿è¯­' },
        { id: 2, name: 'ç…§ç‰‡ç›¸å†Œ', type: 'GALLERY', description: 'æ˜¾ç¤ºç…§ç‰‡é›†åˆï¼Œæ”¯æŒæ»‘åŠ¨æŸ¥çœ‹' },
        { id: 3, name: 'ç•™è¨€æ¿', type: 'MESSAGE_BOARD', description: 'ç”¨æˆ·äº’åŠ¨ç•™è¨€æ¿' },
        { id: 4, name: 'è§†é¢‘æ’­æ”¾', type: 'VIDEO', description: 'è§†é¢‘æ’­æ”¾ç»„ä»¶' }
      ]);
      const [selectedPage, setSelectedPage] = React.useState({ 
        components: [
          { id: 1, name: 'ä¸ªäººä¿¡æ¯ç»„ä»¶', type: 'PROFILE' },
          { id: 2, name: 'ç…§ç‰‡ç›¸å†Œ', type: 'GALLERY' },
          { id: 3, name: 'ç•™è¨€æ¿', type: 'MESSAGE_BOARD' },
          { id: 4, name: 'è§†é¢‘æ’­æ”¾', type: 'VIDEO' }
        ]
      });
      
      // çŠ¶æ€ç®¡ç†
      const [formState, setFormState] = React.useState({
        useAIContent: false,
        aiContentType: 'text',
        useVoice: false, 
        voiceType: 'fixed',
        fixedVoice: 'standard',
        textPrompt: ''
      });
      
      // æ‰“å¼€ç»„ä»¶é…ç½®æ¨¡æ€æ¡†
      const editComponentConfig = (index) => {
        setCurrentComponentIndex(index);
        setConfigModalVisible(true);
        
        // é‡ç½®è¡¨å•å¹¶è®¾ç½®åˆå§‹å€¼
        componentForm.resetFields();
        
        // è®¾ç½®é»˜è®¤å€¼
        const initialValues = {
          useAIContent: false,
          aiContentType: 'text',
          useVoice: false,
          voiceType: 'fixed',
          fixedVoice: 'standard',
          textPrompt: '',
          tagMappings: []
        };
        
        componentForm.setFieldsValue(initialValues);
        setFormState(initialValues);
      };
      
      // å¤„ç†è¡¨å•å€¼å˜åŒ–
      const handleValuesChange = (changedValues, allValues) => {
        console.log('è¡¨å•å€¼å˜åŒ–:', changedValues, allValues);
        setFormState({ ...formState, ...changedValues });
      };
      
      const columns = [
        {
          title: 'ç»„ä»¶åç§°',
          dataIndex: 'name',
          key: 'name',
        },
        {
          title: 'ç»„ä»¶ç±»å‹',
          dataIndex: 'type',
          key: 'type',
        },
        {
          title: 'ç»„ä»¶æè¿°',
          dataIndex: 'description',
          key: 'description',
        },
        {
          title: 'æ“ä½œ',
          key: 'action',
          render: (_, record, index) => (
            <Space size="middle">
              <a onClick={() => editComponentConfig(index)}>é…ç½®</a>
            </Space>
          ),
        },
      ];
      
      return (
        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex justify-between items-center mb-4">
            <Title level={4}>ç»„ä»¶é…ç½®</Title>
          </div>
          <Paragraph>
            é…ç½®å„ç»„ä»¶çš„å±æ€§å’Œè¡Œä¸ºï¼ŒåŒ…æ‹¬AIå†…å®¹ç”Ÿæˆã€æ•°æ®ç»‘å®šç­‰ã€‚
          </Paragraph>
          <Table 
            dataSource={components} 
            columns={columns} 
            rowKey="id" 
          />
          
          {/* ç»„ä»¶é…ç½®æ¨¡æ€æ¡† */}
          <Modal
            title={`é…ç½®ç»„ä»¶ï¼š${currentComponentIndex !== null && selectedPage ? selectedPage.components[currentComponentIndex].name : ''}`}
            open={configModalVisible}
            onCancel={() => setConfigModalVisible(false)}
            onOk={() => {
              componentForm.validateFields().then(values => {
                console.log('è¡¨å•éªŒè¯é€šè¿‡:', values);
                setConfigModalVisible(false);
                message.success('é…ç½®å·²ä¿å­˜');
              }).catch(error => {
                console.log('è¡¨å•éªŒè¯å¤±è´¥:', error);
              });
            }}
            width={700}
          >
            {currentComponentIndex !== null && selectedPage && (
              <Form 
                form={componentForm} 
                layout="vertical"
                onValuesChange={handleValuesChange}
              >
                <Form.Item label="ç»„ä»¶åç§°" name="componentName" initialValue={selectedPage.components[currentComponentIndex].name}>
                  <Input />
                </Form.Item>
                <Form.Item label="ç»‘å®šæ ‡ç­¾" name="dataTags">
                  <Select placeholder="é€‰æ‹©æ•°æ®æ ‡ç­¾" mode="multiple">
                    <Option value="å§“å">å§“å</Option>
                    <Option value="å¹´é¾„">å¹´é¾„</Option>
                    <Option value="å¤´åƒ">å¤´åƒ</Option>
                    <Option value="è¯¾ç¨‹åç§°">è¯¾ç¨‹åç§°</Option>
                    <Option value="å­¦ä¹ è¿›åº¦">å­¦ä¹ è¿›åº¦</Option>
                  </Select>
                </Form.Item>
                
                <Divider>ç»„ä»¶ç‰¹æœ‰å±æ€§</Divider>
                
                {selectedPage.components[currentComponentIndex].type === 'PROFILE' && (
                  <React.Fragment>
                    <Form.Item label="æ˜¾ç¤ºå¤´åƒ" name="displayAvatar" valuePropName="checked">
                      <Switch defaultChecked />
                    </Form.Item>
                    <Form.Item label="æ˜¾ç¤ºä¸ªäººç®€ä»‹" name="displayBio" valuePropName="checked">
                      <Switch defaultChecked />
                    </Form.Item>
                  </React.Fragment>
                )}
                
                {selectedPage.components[currentComponentIndex].type === 'GALLERY' && (
                  <React.Fragment>
                    <Form.Item label="æ¯è¡Œæ˜¾ç¤ºæ•°é‡" name="imagesPerRow">
                      <Slider min={1} max={5} defaultValue={3} />
                    </Form.Item>
                    <Form.Item label="æ˜¾ç¤ºå›¾ç‰‡æè¿°" name="showCaption" valuePropName="checked">
                      <Switch defaultChecked />
                    </Form.Item>
                  </React.Fragment>
                )}
                
                {selectedPage.components[currentComponentIndex].type === 'MESSAGE_BOARD' && (
                  <React.Fragment>
                    <Form.Item label="æœ€å¤§æ˜¾ç¤ºç•™è¨€æ•°" name="maxMessages">
                      <InputNumber min={1} max={50} defaultValue={10} />
                    </Form.Item>
                    <Form.Item label="å…è®¸åŒ¿åç•™è¨€" name="allowAnonymous" valuePropName="checked">
                      <Switch />
                    </Form.Item>
                  </React.Fragment>
                )}
                
                {selectedPage.components[currentComponentIndex].type === 'VIDEO' && (
                  <React.Fragment>
                    <Form.Item label="è‡ªåŠ¨æ’­æ”¾" name="autoPlay" valuePropName="checked">
                      <Switch />
                    </Form.Item>
                    <Form.Item label="æ˜¾ç¤ºæ§åˆ¶æ " name="controls" valuePropName="checked">
                      <Switch defaultChecked />
                    </Form.Item>
                  </React.Fragment>
                )}
                
                <Divider>AIå†…å®¹ç”Ÿæˆé…ç½®</Divider>
                
                <Form.Item 
                  name="useAIContent" 
                  valuePropName="checked"
                  label="å¯ç”¨AIå†…å®¹ç”Ÿæˆ"
                >
                  <Switch onChange={(checked) => setFormState({...formState, useAIContent: checked})} />
                </Form.Item>
                
                <Form.Item
                  name="aiContentType"
                  label="AIå†…å®¹ç±»å‹"
                  dependencies={['useAIContent']}
                >
                  <Select
                    placeholder="è¯·é€‰æ‹©ç”Ÿæˆå†…å®¹ç±»å‹"
                    disabled={!formState.useAIContent}
                    onChange={(value) => setFormState({...formState, aiContentType: value})}
                  >
                    <Option value="text">æ–‡æœ¬</Option>
                    <Option value="image">å›¾ç‰‡</Option>
                    <Option value="video">è§†é¢‘</Option>
                  </Select>
                </Form.Item>
                
                <Form.Item
                  name="aiTextConfig"
                  label="æ–‡æ¡ˆç”Ÿæˆé…ç½®"
                  dependencies={['useAIContent', 'aiContentType']}
                  style={{ 
                    display: formState.useAIContent && 
                    formState.aiContentType === 'text' ? 'block' : 'none' 
                  }}
                >
                  <div style={{ background: '#f5f5f5', padding: '12px', borderRadius: '4px' }}>
                    <Form.Item name="textPrompt" label="æ–‡æ¡ˆæç¤ºè¯" noStyle>
                      <Input.TextArea 
                        rows={3} 
                        placeholder="è¯·è¾“å…¥æ–‡æ¡ˆç”Ÿæˆæç¤ºè¯ï¼Œä¾‹å¦‚ï¼šç”Ÿæˆä¸€æ®µä¸ªæ€§åŒ–çš„æ¬¢è¿è¯­"
                        onChange={(e) => setFormState({...formState, textPrompt: e.target.value})}
                      />
                    </Form.Item>
                    
                    <div style={{ marginTop: '12px' }}>
                      <Form.Item 
                        name="useVoice" 
                        valuePropName="checked" 
                        label="å¯ç”¨è¯­éŸ³æ’­æŠ¥" 
                        noStyle
                      >
                        <Switch onChange={(checked) => setFormState({...formState, useVoice: checked})} />
                      </Form.Item>
                      <span style={{ marginLeft: '8px' }}>å¯ç”¨è¯­éŸ³æ’­æŠ¥</span>
                    </div>
                    
                    <div style={{ 
                      marginTop: '12px',
                      display: formState.useVoice ? 'block' : 'none'
                    }}>
                      <Form.Item name="voiceType" label="è¯­éŸ³ç±»å‹" noStyle>
                        <Radio.Group onChange={(e) => setFormState({...formState, voiceType: e.target.value})}>
                          <Radio value="fixed">å›ºå®šéŸ³è‰²</Radio>
                          <Radio value="auto">æ™ºèƒ½åŒ¹é…éŸ³è‰²</Radio>
                        </Radio.Group>
                      </Form.Item>
                    </div>
                    
                    <div style={{ 
                      marginTop: '12px',
                      display: formState.useVoice && 
                              formState.voiceType === 'fixed' ? 'block' : 'none'
                    }}>
                      <Form.Item name="fixedVoice" label="é€‰æ‹©éŸ³è‰²" noStyle>
                        <Select 
                          placeholder="è¯·é€‰æ‹©éŸ³è‰²"
                          onChange={(value) => setFormState({...formState, fixedVoice: value})}
                        >
                          <Option value="standard">æ ‡å‡†æ™®é€šè¯</Option>
                          <Option value="female">å¥³å£°</Option>
                          <Option value="male">ç”·å£°</Option>
                          <Option value="child">å„¿ç«¥å£°</Option>
                        </Select>
                      </Form.Item>
                    </div>
                    
                    <div style={{ 
                      marginTop: '12px',
                      display: formState.useVoice && 
                              formState.voiceType === 'auto' ? 'block' : 'none'
                    }}>
                      <Form.Item name="autoVoiceConfig" label="æ™ºèƒ½åŒ¹é…é…ç½®" noStyle>
                        <Select mode="multiple" placeholder="é€‰æ‹©åŒ¹é…ä¾æ®">
                          <Option value="ip">ç”¨æˆ·IPåœ°å€ï¼ˆæ–¹è¨€åŒ¹é…ï¼‰</Option>
                          <Option value="age">ç”¨æˆ·å¹´é¾„</Option>
                          <Option value="gender">ç”¨æˆ·æ€§åˆ«</Option>
                          <Option value="interest">ç”¨æˆ·å…´è¶£</Option>
                        </Select>
                      </Form.Item>
                    </div>
                  </div>
                </Form.Item>
                
                <Form.Item
                  name="aiTagMapping"
                  label="æ•°æ®æ ‡ç­¾æ˜ å°„"
                  dependencies={['useAIContent']}
                  style={{ display: formState.useAIContent ? 'block' : 'none' }}
                >
                  <div style={{ background: '#f5f5f5', padding: '12px', borderRadius: '4px' }}>
                    <Paragraph>
                      <Text type="secondary">å°†ä¸šåŠ¡ç³»ç»Ÿæ ‡ç­¾æ˜ å°„åˆ°AIå†…å®¹ç”Ÿæˆï¼Œæ”¯æŒæ’å…¥åˆ°æç¤ºè¯ä¸­</Text>
                    </Paragraph>
                    
                    <Form.List name="tagMappings">
                      {(fields, { add, remove }) => (
                        <>
                          {fields.map(({ key, name, ...restField }) => (
                            <Space 
                              key={key} 
                              style={{ display: 'flex', marginBottom: 8 }} 
                              align="baseline"
                            >
                              <Form.Item
                                {...restField}
                                name={[name, 'tag']}
                                rules={[{ required: true, message: 'è¯·é€‰æ‹©æ ‡ç­¾' }]}
                              >
                                <Select placeholder="é€‰æ‹©æ ‡ç­¾" style={{ width: 150 }}>
                                  <Option value="å§“å">å§“å</Option>
                                  <Option value="å¹´é¾„">å¹´é¾„</Option>
                                  <Option value="åœ°åŒº">åœ°åŒº</Option>
                                  <Option value="å…´è¶£">å…´è¶£</Option>
                                  <Option value="å­¦ä¹ è¿›åº¦">å­¦ä¹ è¿›åº¦</Option>
                                </Select>
                              </Form.Item>
                              <Form.Item
                                {...restField}
                                name={[name, 'placeholder']}
                                rules={[{ required: true, message: 'è¯·è¾“å…¥å ä½ç¬¦' }]}
                              >
                                <Input placeholder="è¾“å…¥æç¤ºè¯ä¸­çš„å ä½ç¬¦" style={{ width: 180 }} />
                              </Form.Item>
                              <Button 
                                type="text"
                                icon={<span role="img" aria-label="delete">ğŸ—‘ï¸</span>}
                                onClick={() => remove(name)}
                              />
                            </Space>
                          ))}
                          <Form.Item>
                            <Button 
                              type="dashed" 
                              onClick={() => add()} 
                              block 
                              icon={<span role="img" aria-label="plus">â•</span>}
                            >
                              æ·»åŠ æ ‡ç­¾æ˜ å°„
                            </Button>
                          </Form.Item>
                        </>
                      )}
                    </Form.List>
                  </div>
                </Form.Item>
                
                <Form.Item
                  name="aiPreview"
                  label="AIå†…å®¹é¢„è§ˆ"
                  dependencies={['useAIContent', 'aiContentType', 'textPrompt', 'useVoice', 'voiceType', 'fixedVoice']}
                  style={{ display: formState.useAIContent ? 'block' : 'none' }}
                >
                  <div className="border border-dashed border-gray-300 rounded-md p-4 bg-gray-50">
                    <div className="mb-2">
                      <Text strong>å†…å®¹é¢„è§ˆï¼š</Text>
                    </div>
                    <div>
                      {formState.aiContentType === 'text' && (
                        <div>
                          <div className="mb-2">
                            <Text>ç”Ÿæˆçš„æ–‡æ¡ˆå°†æ˜¾ç¤ºåœ¨è¿™é‡Œï¼š</Text>
                          </div>
                          <div className="bg-blue-50 p-3 rounded-md">
                            {formState.textPrompt ? (
                              <Paragraph>
                                æ ¹æ®æ‚¨çš„æç¤ºè¯ï¼š"{formState.textPrompt}"ï¼Œ
                                å°†ç”Ÿæˆä¸ªæ€§åŒ–æ–‡æ¡ˆï¼Œå¹¶æ’å…¥æ ‡ç­¾å†…å®¹ã€‚
                              </Paragraph>
                            ) : (
                              <Text type="secondary">è¯·å¡«å†™æ–‡æ¡ˆæç¤ºè¯æŸ¥çœ‹é¢„è§ˆ</Text>
                            )}
                            
                            {formState.useVoice && (
                              <div className="mt-2">
                                <Tag color="blue">
                                  {formState.voiceType === 'fixed' ? 
                                    `å°†ä½¿ç”¨å›ºå®šéŸ³è‰²ï¼š${formState.fixedVoice || 'è¯·é€‰æ‹©éŸ³è‰²'}` : 
                                    'å°†æ ¹æ®ç”¨æˆ·å±æ€§æ™ºèƒ½åŒ¹é…é€‚åˆçš„æ–¹è¨€æˆ–éŸ³è‰²'}
                                </Tag>
                              </div>
                            )}
                          </div>
                        </div>
                      )}
                      
                      {formState.aiContentType === 'image' && (
                        <div className="text-center">
                          <div className="w-[200px] h-[150px] bg-blue-50 flex items-center justify-center mx-auto rounded-md">
                            <div className="text-blue-500 flex flex-col items-center">
                              <svg className="w-10 h-10 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                xmlns="http://www.w3.org/2000/svg">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                  d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                              </svg>
                              <Text type="secondary">AIç”Ÿæˆçš„å›¾ç‰‡å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</Text>
                            </div>
                          </div>
                        </div>
                      )}
                      
                      {formState.aiContentType === 'video' && (
                        <div className="text-center">
                          <div className="w-[300px] h-[180px] bg-blue-50 flex items-center justify-center mx-auto rounded-md">
                            <div className="text-blue-500 flex flex-col items-center">
                              <svg className="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                xmlns="http://www.w3.org/2000/svg">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                  d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                              </svg>
                              <Text type="secondary">AIç”Ÿæˆçš„è§†é¢‘å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</Text>
                            </div>
                          </div>
                        </div>
                      )}
                    </div>
                  </div>
                </Form.Item>
              </Form>
            )}
          </Modal>
        </div>
      );
    };
    
    // é¡µé¢ç»„è£…
    const PageAssembly = () => {
      const dragRef = React.useRef(null);
      const [previewComponentVisible, setPreviewComponentVisible] = React.useState(false);
      const [pages, setPages] = React.useState([
        { id: 1, name: 'ç”Ÿæ—¥ç¥ç¦ä¼šåœº', components: [
          { id: 1, name: 'ä¸ªäººä¿¡æ¯ç»„ä»¶', type: 'PROFILE' },
          { id: 2, name: 'ç…§ç‰‡ç›¸å†Œ', type: 'GALLERY' },
          { id: 3, name: 'ç•™è¨€æ¿', type: 'MESSAGE_BOARD' }
        ], status: 'published' },
        { id: 2, name: 'æ¯•ä¸šçºªå¿µä¼šåœº', components: [
          { id: 1, name: 'ä¸ªäººä¿¡æ¯ç»„ä»¶', type: 'PROFILE' },
          { id: 4, name: 'è§†é¢‘æ’­æ”¾', type: 'VIDEO' },
          { id: 3, name: 'ç•™è¨€æ¿', type: 'MESSAGE_BOARD' }
        ], status: 'draft' }
      ]);
      
      const [selectedPage, setSelectedPage] = React.useState(null);
      const [editNameModalVisible, setEditNameModalVisible] = React.useState(false);
      const [previewModalVisible, setPreviewModalVisible] = React.useState(false);
      const [componentConfigModalVisible, setComponentConfigModalVisible] = React.useState(false);
      const [currentComponentIndex, setCurrentComponentIndex] = React.useState(null);
      const [form] = Form.useForm();
      const [componentForm] = Form.useForm();
      
      // çŠ¶æ€ç®¡ç†
      const [formState, setFormState] = React.useState({
        useAIContent: false,
        aiContentType: 'text',
        useVoice: false, 
        voiceType: 'fixed',
        fixedVoice: 'standard',
        textPrompt: ''
      });
      
      // æ·»åŠ ç»„ä»¶åˆ°é¡µé¢
      const addComponentToPage = (component) => {
        if (!selectedPage) return;
        
        // æ ¹æ®ç»„ä»¶åç§°æ·»åŠ ä¸åŒç±»å‹çš„ç»„ä»¶
        let componentData;
        if (component === 'ä¸ªäººä¿¡æ¯ç»„ä»¶') {
          componentData = { id: Date.now(), name: 'ä¸ªäººä¿¡æ¯ç»„ä»¶', type: 'PROFILE' };
        } else if (component === 'ç…§ç‰‡ç›¸å†Œ') {
          componentData = { id: Date.now(), name: 'ç…§ç‰‡ç›¸å†Œ', type: 'GALLERY' };
        } else if (component === 'ç•™è¨€æ¿') {
          componentData = { id: Date.now(), name: 'ç•™è¨€æ¿', type: 'MESSAGE_BOARD' };
        } else if (component === 'è§†é¢‘æ’­æ”¾') {
          componentData = { id: Date.now(), name: 'è§†é¢‘æ’­æ”¾', type: 'VIDEO' };
        }
        
        const updatedPage = {
          ...selectedPage,
          components: [...selectedPage.components, componentData]
        };
        
        updatePage(updatedPage);
        message.success(`å·²æ·»åŠ ç»„ä»¶: ${component}`);
      };
      
      // ä»é¡µé¢ç§»é™¤ç»„ä»¶
      const removeComponentFromPage = (index) => {
        if (!selectedPage) return;
        
        const updatedComponents = [...selectedPage.components];
        updatedComponents.splice(index, 1);
        
        const updatedPage = {
          ...selectedPage,
          components: updatedComponents
        };
        
        updatePage(updatedPage);
      };
      
      // ä¸Šç§»ç»„ä»¶
      const moveComponentUp = (index) => {
        if (!selectedPage || index === 0) return;
        
        const updatedComponents = [...selectedPage.components];
        const temp = updatedComponents[index];
        updatedComponents[index] = updatedComponents[index - 1];
        updatedComponents[index - 1] = temp;
        
        const updatedPage = {
          ...selectedPage,
          components: updatedComponents
        };
        
        updatePage(updatedPage);
      };
      
      // ä¸‹ç§»ç»„ä»¶
      const moveComponentDown = (index) => {
        if (!selectedPage || index === selectedPage.components.length - 1) return;
        
        const updatedComponents = [...selectedPage.components];
        const temp = updatedComponents[index];
        updatedComponents[index] = updatedComponents[index + 1];
        updatedComponents[index + 1] = temp;
        
        const updatedPage = {
          ...selectedPage,
          components: updatedComponents
        };
        
        updatePage(updatedPage);
      };
      
      // æ›´æ–°é¡µé¢
      const updatePage = (updatedPage) => {
        const updatedPages = pages.map(page => 
          page.id === updatedPage.id ? updatedPage : page
        );
        
        setPages(updatedPages);
        setSelectedPage(updatedPage);
      };
      
      // æ–°å»ºé¡µé¢
      const createNewPage = () => {
        setEditNameModalVisible(true);
        form.resetFields();
      };
      
      // ç¼–è¾‘é¡µé¢åç§°
      const editPageName = () => {
        if (!selectedPage) return;
        setEditNameModalVisible(true);
        form.setFieldsValue({ name: selectedPage.name });
      };
      
      // ä¿å­˜é¡µé¢åç§°
      const handleSavePageName = () => {
        form.validateFields().then(values => {
          if (selectedPage) {
            // æ›´æ–°ç°æœ‰é¡µé¢åç§°
            const updatedPage = {
              ...selectedPage,
              name: values.name
            };
            updatePage(updatedPage);
            setEditNameModalVisible(false);
            message.success('é¡µé¢åç§°å·²æ›´æ–°');
          } else {
            // åˆ›å»ºæ–°é¡µé¢
            const newPage = {
              id: pages.length > 0 ? Math.max(...pages.map(page => page.id)) + 1 : 1,
              name: values.name,
              components: [],
              status: 'draft'
            };
            
            setPages([...pages, newPage]);
            setSelectedPage(newPage);
            setEditNameModalVisible(false);
            message.success('å·²åˆ›å»ºæ–°é¡µé¢');
          }
        });
      };
      
      // ç¼–è¾‘ç»„ä»¶é…ç½®
      const editComponentConfig = (index) => {
        setCurrentComponentIndex(index);
        setComponentConfigModalVisible(true);
        
        // é‡ç½®è¡¨å•å¹¶è®¾ç½®åˆå§‹å€¼
        componentForm.resetFields();
        
        // è®¾ç½®é»˜è®¤å€¼
        const initialValues = {
          useAIContent: false,
          aiContentType: 'text',
          useVoice: false,
          voiceType: 'fixed',
          fixedVoice: 'standard',
          textPrompt: '',
          tagMappings: []
        };
        
        componentForm.setFieldsValue(initialValues);
        setFormState(initialValues);
      };
      
      // å¤„ç†è¡¨å•å€¼å˜åŒ–
      const handleValuesChange = (changedValues, allValues) => {
        console.log('è¡¨å•å€¼å˜åŒ–:', changedValues, allValues);
        setFormState({ ...formState, ...changedValues });
      };
      
      // ä¿å­˜ç»„ä»¶é…ç½®
      const handleSaveComponentConfig = () => {
        componentForm.validateFields().then(values => {
          // è¿™é‡Œåªæ˜¯ç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦æ ¹æ®ç»„ä»¶ç±»å‹ä¿å­˜ä¸åŒçš„é…ç½®é¡¹
          message.success('ç»„ä»¶é…ç½®å·²ä¿å­˜');
          setComponentConfigModalVisible(false);
        });
      };
      
      // ä¿å­˜é¡µé¢
      const savePage = () => {
        if (!selectedPage) return;
        
        const updatedPage = {
          ...selectedPage,
          status: 'published'
        };
        
        updatePage(updatedPage);
        message.success('é¡µé¢å·²ä¿å­˜å¹¶å‘å¸ƒ');
      };
      
      // é¢„è§ˆé¡µé¢
      const previewPage = (page) => {
        setSelectedPage(page);
        setPreviewModalVisible(true);
      };
      
      // åˆ é™¤é¡µé¢
      const deletePage = (id) => {
        Modal.confirm({
          title: 'ç¡®è®¤åˆ é™¤',
          content: 'ç¡®å®šè¦åˆ é™¤æ­¤é¡µé¢å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ã€‚',
          okText: 'ç¡®è®¤',
          cancelText: 'å–æ¶ˆ',
          onOk: () => {
            const newPages = pages.filter(page => page.id !== id);
            setPages(newPages);
            if (selectedPage && selectedPage.id === id) {
              setSelectedPage(null);
            }
            message.success('é¡µé¢å·²åˆ é™¤');
          }
        });
      };
      
      // ç”Ÿæˆç»„ä»¶é…ç½®è¡¨å•
      const renderComponentConfigForm = () => {
        if (currentComponentIndex === null || !selectedPage) return null;
        
        const componentType = selectedPage.components[currentComponentIndex].type;
        
        switch(componentType) {
          case 'PROFILE':
            return (
              <React.Fragment>
                <Form.Item label="æ˜¾ç¤ºå¤´åƒ" name="displayAvatar" valuePropName="checked">
                  <Switch defaultChecked />
                </Form.Item>
                <Form.Item label="æ˜¾ç¤ºä¸ªäººç®€ä»‹" name="displayBio" valuePropName="checked">
                  <Switch defaultChecked />
                </Form.Item>
              </React.Fragment>
            );
          case 'GALLERY':
            return (
              <React.Fragment>
                <Form.Item label="æ¯è¡Œæ˜¾ç¤ºæ•°é‡" name="imagesPerRow">
                  <Slider min={1} max={5} defaultValue={3} />
                </Form.Item>
                <Form.Item label="æ˜¾ç¤ºå›¾ç‰‡æè¿°" name="showCaption" valuePropName="checked">
                  <Switch defaultChecked />
                </Form.Item>
              </React.Fragment>
            );
          case 'MESSAGE_BOARD':
            return (
              <React.Fragment>
                <Form.Item label="æœ€å¤§æ˜¾ç¤ºç•™è¨€æ•°" name="maxMessages">
                  <InputNumber min={1} max={50} defaultValue={10} />
                </Form.Item>
                <Form.Item label="å…è®¸åŒ¿åç•™è¨€" name="allowAnonymous" valuePropName="checked">
                  <Switch />
                </Form.Item>
              </React.Fragment>
            );
          case 'VIDEO':
            return (
              <React.Fragment>
                <Form.Item label="è‡ªåŠ¨æ’­æ”¾" name="autoPlay" valuePropName="checked">
                  <Switch />
                </Form.Item>
                <Form.Item label="æ˜¾ç¤ºæ§åˆ¶æ " name="controls" valuePropName="checked">
                  <Switch defaultChecked />
                </Form.Item>
              </React.Fragment>
            );
          default:
            return null;
        }
      };
      
      const columns = [
        {
          title: 'é¡µé¢åç§°',
          dataIndex: 'name',
          key: 'name',
        },
        {
          title: 'çŠ¶æ€',
          key: 'status',
          dataIndex: 'status',
          render: status => (
            <Tag color={status === 'published' ? 'green' : 'blue'}>
              {status === 'published' ? 'å·²å‘å¸ƒ' : 'è‰ç¨¿'}
            </Tag>
          ),
        },
        {
          title: 'æ“ä½œ',
          key: 'action',
          render: (_, record) => (
            <Space size="middle">
              <a onClick={() => setSelectedPage(record)}>ç¼–è¾‘</a>
              <a onClick={() => previewPage(record)}>é¢„è§ˆ</a>
              <a onClick={() => deletePage(record.id)}>åˆ é™¤</a>
            </Space>
          ),
        },
      ];
      
      return (
        <div className="bg-white rounded-lg shadow-md p-6">
          {!selectedPage ? (
            <React.Fragment>
              <div className="flex justify-between items-center mb-4">
                <Title level={4}>é¡µé¢ç»„è£…</Title>
                <Button type="primary" onClick={createNewPage}>æ–°å»ºé¡µé¢</Button>
              </div>
              <Paragraph>
                é¡µé¢ç»„è£…ç”¨äºå°†å¤šä¸ªç»„ä»¶ç»„åˆæˆå®Œæ•´çš„äº¤äº’é¡µé¢ï¼ˆä¼šåœºï¼‰ã€‚
              </Paragraph>
              <Table 
                dataSource={pages} 
                columns={columns} 
                rowKey="id" 
              />
            </React.Fragment>
          ) : (
            <React.Fragment>
              <div className="flex justify-between items-center mb-4">
                <div className="flex items-center gap-2">
                  <Title level={4}>ç¼–è¾‘é¡µé¢ï¼š{selectedPage.name}</Title>
                  <Button size="small" onClick={editPageName}>ä¿®æ”¹åç§°</Button>
                </div>
                <div className="flex gap-2">
                  <Button onClick={() => previewPage(selectedPage)}>é¢„è§ˆ</Button>
                  <Button type="primary" onClick={savePage}>ä¿å­˜å¹¶å‘å¸ƒ</Button>
                  <Button onClick={() => setSelectedPage(null)}>è¿”å›åˆ—è¡¨</Button>
                </div>
              </div>
              <div className="flex gap-6">
                <div className="w-1/3">
                  <Card title="å¯ç”¨ç»„ä»¶">
                    <div className="flex flex-col gap-2">
                      <Card 
                        size="small" 
                        hoverable
                        onClick={() => addComponentToPage('ä¸ªäººä¿¡æ¯ç»„ä»¶')}
                        className="cursor-pointer hover:bg-blue-50 transition-colors"
                      >
                        <div className="flex items-center gap-2">
                          <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                            xmlns="http://www.w3.org/2000/svg">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                          </svg>
                          ä¸ªäººä¿¡æ¯ç»„ä»¶
                        </div>
                      </Card>
                      <Card 
                        size="small" 
                        hoverable
                        onClick={() => addComponentToPage('ç…§ç‰‡ç›¸å†Œ')}
                        className="cursor-pointer hover:bg-blue-50 transition-colors"
                      >
                        <div className="flex items-center gap-2">
                          <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                            xmlns="http://www.w3.org/2000/svg">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                              d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                          </svg>
                          ç…§ç‰‡ç›¸å†Œ
                        </div>
                      </Card>
                      <Card 
                        size="small" 
                        hoverable
                        onClick={() => addComponentToPage('ç•™è¨€æ¿')}
                        className="cursor-pointer hover:bg-blue-50 transition-colors"
                      >
                        <div className="flex items-center gap-2">
                          <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                            xmlns="http://www.w3.org/2000/svg">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                              d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                          </svg>
                          ç•™è¨€æ¿
                        </div>
                      </Card>
                      <Card 
                        size="small" 
                        hoverable
                        onClick={() => addComponentToPage('è§†é¢‘æ’­æ”¾')}
                        className="cursor-pointer hover:bg-blue-50 transition-colors"
                      >
                        <div className="flex items-center gap-2">
                          <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                            xmlns="http://www.w3.org/2000/svg">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                              d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                          </svg>
                          è§†é¢‘æ’­æ”¾
                        </div>
                      </Card>
                    </div>
                  </Card>
                </div>
                <div className="w-2/3">
                  <Card title="é¡µé¢å¸ƒå±€">
                    {selectedPage.components.length === 0 ? (
                      <div className="text-center py-10 text-gray-500">
                        ä»å·¦ä¾§æ·»åŠ ç»„ä»¶åˆ°é¡µé¢ä¸­
                      </div>
                    ) : (
                      <div className="flex flex-col gap-4">
                        {selectedPage.components.map((component, index) => (
                          <Card 
                            key={index} 
                            size="small" 
                            title={component.name}
                            extra={
                              <Space>
                                <a onClick={() => editComponentConfig(index)}>é…ç½®</a>
                                <a onClick={() => moveComponentUp(index)} className={index === 0 ? "text-gray-300 cursor-not-allowed" : ""}>ä¸Šç§»</a>
                                <a onClick={() => moveComponentDown(index)} className={index === selectedPage.components.length - 1 ? "text-gray-300 cursor-not-allowed" : ""}>ä¸‹ç§»</a>
                                <a onClick={() => removeComponentFromPage(index)} className="text-red-500">ç§»é™¤</a>
                              </Space>
                            }
                            className="border border-gray-200 hover:border-blue-300 transition-colors"
                          >
                            <div className="flex items-center gap-2">
                              {component.type === 'PROFILE' && (
                                <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                  xmlns="http://www.w3.org/2000/svg">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                              )}
                              {component.type === 'GALLERY' && (
                                <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                  xmlns="http://www.w3.org/2000/svg">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                              )}
                              {component.type === 'MESSAGE_BOARD' && (
                                <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                  xmlns="http://www.w3.org/2000/svg">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                    d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                                </svg>
                              )}
                              {component.type === 'VIDEO' && (
                                <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                  xmlns="http://www.w3.org/2000/svg">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                    d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                              )}
                              {component.name} ç»„ä»¶
                            </div>
                          </Card>
                        ))}
                      </div>
                    )}
                  </Card>
                </div>
              </div>
            </React.Fragment>
          )}
          
          {/* é¡µé¢åç§°æ¨¡æ€æ¡†ï¼ˆç”¨äºæ–°å»ºæˆ–ç¼–è¾‘ï¼‰ */}
          <Modal
            title={selectedPage ? "ç¼–è¾‘é¡µé¢åç§°" : "æ–°å»ºé¡µé¢"}
            open={editNameModalVisible}
            onCancel={() => setEditNameModalVisible(false)}
            onOk={handleSavePageName}
          >
            <Form
              form={form}
              layout="vertical"
            >
              <Form.Item
                name="name"
                label="é¡µé¢åç§°"
                rules={[{ required: true, message: 'è¯·è¾“å…¥é¡µé¢åç§°' }]}
              >
                <Input placeholder="è¯·è¾“å…¥é¡µé¢åç§°" />
              </Form.Item>
            </Form>
          </Modal>
          
          {/* é¢„è§ˆæ¨¡æ€æ¡† */}
          <Modal
            title={`é¢„è§ˆï¼š${selectedPage?.name || ''}`}
            open={previewModalVisible}
            onCancel={() => setPreviewModalVisible(false)}
            width={800}
            footer={[
              <Button key="close" onClick={() => setPreviewModalVisible(false)}>
                å…³é—­
              </Button>
            ]}
          >
            {selectedPage && (
              <div style={{ textAlign: 'center' }}>
                <div className="phone-frame">
                  <div className="phone-content">
                    <div className="p-4">
                      <div className="text-center mb-4">
                        <h1 className="text-2xl font-bold">{selectedPage.name}</h1>
                      </div>
                      
                      {selectedPage.components.map((component, index) => {
                        if (component.type === 'PROFILE') {
                          return (
                            <div key={index} className="bg-white rounded-lg shadow-md p-4 mb-4">
                              <div className="flex items-center">
                                <img 
                                  src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=120&h=120&q=80" 
                                  alt="ç”¨æˆ·å¤´åƒ" 
                                  className="w-20 h-20 rounded-full mr-4 object-cover"
                                />
                                <div>
                                  <h2 className="text-xl font-semibold">ç‹å°æ˜</h2>
                                  <div className="mt-2 p-3 bg-blue-50 rounded-md text-blue-600 text-sm">
                                    å—¨ï¼Œç‹å°æ˜ï¼çœ‹åˆ°ä½ å¯¹éŸ³ä¹å¾ˆæ„Ÿå…´è¶£ï¼Œå¸Œæœ›ä»Šå¤©è¿‡å¾—æ„‰å¿«ï¼
                                  </div>
                                </div>
                              </div>
                            </div>
                          );
                        } else if (component.type === 'GALLERY') {
                          return (
                            <div key={index} className="bg-white rounded-lg shadow-md p-4 mb-4">
                              <h2 className="text-xl font-semibold mb-3">ç…§ç‰‡ç›¸å†Œ</h2>
                              <div className="flex overflow-x-auto gap-2 pb-2">
                                <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" 
                                  alt="é£æ™¯ç…§" className="min-w-[120px] h-[120px] rounded object-cover" />
                                <img src="https://images.unsplash.com/photo-1510414842594-a61c69b5ae57?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" 
                                  alt="æµ·æ»©ç…§" className="min-w-[120px] h-[120px] rounded object-cover" />
                                <img src="https://images.unsplash.com/photo-1505144808419-1957a94ca61e?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" 
                                  alt="æ—¥è½ç…§" className="min-w-[120px] h-[120px] rounded object-cover" />
                                <img src="https://images.unsplash.com/photo-1528184039930-bd03972bd974?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" 
                                  alt="åŸå¸‚ç…§" className="min-w-[120px] h-[120px] rounded object-cover" />
                              </div>
                            </div>
                          );
                        } else if (component.type === 'MESSAGE_BOARD') {
                          return (
                            <div key={index} className="bg-white rounded-lg shadow-md p-4 mb-4">
                              <h2 className="text-xl font-semibold mb-3">ç•™è¨€æ¿</h2>
                              <div className="mb-4">
                                <div className="p-3 bg-gray-50 rounded mb-2">
                                  <span className="font-semibold">æåï¼š</span>
                                  <span>ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼</span>
                                </div>
                                <div className="p-3 bg-gray-50 rounded">
                                  <span className="font-semibold">å¼ ä¸‰ï¼š</span>
                                  <span>æ–°çš„ä¸€å¹´ç»§ç»­åŠ æ²¹ï¼</span>
                                </div>
                              </div>
                              <div className="flex">
                                <input type="text" placeholder="å†™ä¸‹æ‚¨çš„ç•™è¨€..." 
                                  className="flex-1 border border-gray-300 rounded-l px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                <button className="bg-blue-500 text-white px-4 py-2 rounded-r hover:bg-blue-600 transition-colors">
                                  å‘é€
                                </button>
                              </div>
                            </div>
                          );
                        } else if (component.type === 'VIDEO') {
                          return (
                            <div key={index} className="bg-white rounded-lg shadow-md p-4 mb-4">
                              <h2 className="text-xl font-semibold mb-3">è§†é¢‘æ’­æ”¾</h2>
                              <div className="w-full h-[200px] bg-gray-100 rounded flex items-center justify-center">
                                <div className="text-gray-500 flex flex-col items-center">
                                  <svg className="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                      d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                      d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                  </svg>
                                  ç‚¹å‡»æ’­æ”¾è§†é¢‘
                                </div>
                              </div>
                            </div>
                          );
                        }
                        return null;
                      })}
                    </div>
                  </div>
                </div>
              </div>
            )}
          </Modal>
          
          {/* ç»„ä»¶é…ç½®æ¨¡æ€æ¡† */}
          <Modal
            title="ç»„ä»¶é…ç½®"
            open={componentConfigModalVisible}
            onCancel={() => setComponentConfigModalVisible(false)}
            onOk={handleSaveComponentConfig}
            width={600}
          >
            {currentComponentIndex !== null && selectedPage && (
              <React.Fragment>
                <Paragraph>æ­£åœ¨é…ç½®: {selectedPage.components[currentComponentIndex].name}</Paragraph>
                <Form
                  form={componentForm}
                  layout="vertical"
                >
                  {renderComponentConfigForm()}
                  
                  <Divider>AIå†…å®¹ç”Ÿæˆé…ç½®</Divider>
                  
                  <Form.Item 
                    name="useAIContent" 
                    valuePropName="checked"
                    label="å¯ç”¨AIå†…å®¹ç”Ÿæˆ"
                  >
                    <Switch onChange={(checked) => setFormState({...formState, useAIContent: checked})} />
                  </Form.Item>
                  
                  <Form.Item
                    name="aiContentType"
                    label="AIå†…å®¹ç±»å‹"
                    dependencies={['useAIContent']}
                  >
                    <Select
                      placeholder="è¯·é€‰æ‹©ç”Ÿæˆå†…å®¹ç±»å‹"
                      disabled={!formState.useAIContent}
                      onChange={(value) => setFormState({...formState, aiContentType: value})}
                    >
                      <Option value="text">æ–‡æœ¬</Option>
                      <Option value="image">å›¾ç‰‡</Option>
                      <Option value="video">è§†é¢‘</Option>
                    </Select>
                  </Form.Item>
                  
                  <Form.Item
                    name="aiTextConfig"
                    label="æ–‡æ¡ˆç”Ÿæˆé…ç½®"
                    dependencies={['useAIContent', 'aiContentType']}
                    style={{ 
                      display: formState.useAIContent && 
                      formState.aiContentType === 'text' ? 'block' : 'none' 
                    }}
                  >
                    <div style={{ background: '#f5f5f5', padding: '12px', borderRadius: '4px' }}>
                      <Form.Item name="textPrompt" label="æ–‡æ¡ˆæç¤ºè¯" noStyle>
                        <Input.TextArea 
                          rows={3} 
                          placeholder="è¯·è¾“å…¥æ–‡æ¡ˆç”Ÿæˆæç¤ºè¯ï¼Œä¾‹å¦‚ï¼šç”Ÿæˆä¸€æ®µä¸ªæ€§åŒ–çš„æ¬¢è¿è¯­"
                          onChange={(e) => setFormState({...formState, textPrompt: e.target.value})}
                        />
                      </Form.Item>
                      
                      <div style={{ marginTop: '12px' }}>
                        <Form.Item 
                          name="useVoice" 
                          valuePropName="checked" 
                          label="å¯ç”¨è¯­éŸ³æ’­æŠ¥" 
                          noStyle
                        >
                          <Switch onChange={(checked) => setFormState({...formState, useVoice: checked})} />
                        </Form.Item>
                        <span style={{ marginLeft: '8px' }}>å¯ç”¨è¯­éŸ³æ’­æŠ¥</span>
                      </div>
                      
                      <div style={{ 
                        marginTop: '12px',
                        display: formState.useVoice ? 'block' : 'none'
                      }}>
                        <Form.Item name="voiceType" label="è¯­éŸ³ç±»å‹" noStyle>
                          <Radio.Group onChange={(e) => setFormState({...formState, voiceType: e.target.value})}>
                            <Radio value="fixed">å›ºå®šéŸ³è‰²</Radio>
                            <Radio value="auto">æ™ºèƒ½åŒ¹é…éŸ³è‰²</Radio>
                          </Radio.Group>
                        </Form.Item>
                      </div>
                      
                      <div style={{ 
                        marginTop: '12px',
                        display: formState.useVoice && 
                                formState.voiceType === 'fixed' ? 'block' : 'none'
                      }}>
                        <Form.Item name="fixedVoice" label="é€‰æ‹©éŸ³è‰²" noStyle>
                          <Select 
                            placeholder="è¯·é€‰æ‹©éŸ³è‰²"
                            onChange={(value) => setFormState({...formState, fixedVoice: value})}
                          >
                            <Option value="standard">æ ‡å‡†æ™®é€šè¯</Option>
                            <Option value="female">å¥³å£°</Option>
                            <Option value="male">ç”·å£°</Option>
                            <Option value="child">å„¿ç«¥å£°</Option>
                          </Select>
                        </Form.Item>
                      </div>
                      
                      <div style={{ 
                        marginTop: '12px',
                        display: formState.useVoice && 
                                formState.voiceType === 'auto' ? 'block' : 'none'
                      }}>
                        <Form.Item name="autoVoiceConfig" label="æ™ºèƒ½åŒ¹é…é…ç½®" noStyle>
                          <Select mode="multiple" placeholder="é€‰æ‹©åŒ¹é…ä¾æ®">
                            <Option value="ip">ç”¨æˆ·IPåœ°å€ï¼ˆæ–¹è¨€åŒ¹é…ï¼‰</Option>
                            <Option value="age">ç”¨æˆ·å¹´é¾„</Option>
                            <Option value="gender">ç”¨æˆ·æ€§åˆ«</Option>
                            <Option value="interest">ç”¨æˆ·å…´è¶£</Option>
                          </Select>
                        </Form.Item>
                      </div>
                    </div>
                  </Form.Item>
                  
                  <Form.Item
                    name="aiTagMapping"
                    label="æ•°æ®æ ‡ç­¾æ˜ å°„"
                    dependencies={['useAIContent']}
                    style={{ display: formState.useAIContent ? 'block' : 'none' }}
                  >
                    <div style={{ background: '#f5f5f5', padding: '12px', borderRadius: '4px' }}>
                      <Paragraph>
                        <Text type="secondary">å°†ä¸šåŠ¡ç³»ç»Ÿæ ‡ç­¾æ˜ å°„åˆ°AIå†…å®¹ç”Ÿæˆï¼Œæ”¯æŒæ’å…¥åˆ°æç¤ºè¯ä¸­</Text>
                      </Paragraph>
                      
                      <Form.List name="tagMappings">
                        {(fields, { add, remove }) => (
                          <>
                            {fields.map(({ key, name, ...restField }) => (
                              <Space 
                                key={key} 
                                style={{ display: 'flex', marginBottom: 8 }} 
                                align="baseline"
                              >
                                <Form.Item
                                  {...restField}
                                  name={[name, 'tag']}
                                  rules={[{ required: true, message: 'è¯·é€‰æ‹©æ ‡ç­¾' }]}
                                >
                                  <Select placeholder="é€‰æ‹©æ ‡ç­¾" style={{ width: 150 }}>
                                    <Option value="å§“å">å§“å</Option>
                                    <Option value="å¹´é¾„">å¹´é¾„</Option>
                                    <Option value="åœ°åŒº">åœ°åŒº</Option>
                                    <Option value="å…´è¶£">å…´è¶£</Option>
                                    <Option value="å­¦ä¹ è¿›åº¦">å­¦ä¹ è¿›åº¦</Option>
                                  </Select>
                                </Form.Item>
                                <Form.Item
                                  {...restField}
                                  name={[name, 'placeholder']}
                                  rules={[{ required: true, message: 'è¯·è¾“å…¥å ä½ç¬¦' }]}
                                >
                                  <Input placeholder="è¾“å…¥æç¤ºè¯ä¸­çš„å ä½ç¬¦" style={{ width: 180 }} />
                                </Form.Item>
                                <Button 
                                  type="text"
                                  icon={<span role="img" aria-label="delete">ğŸ—‘ï¸</span>}
                                  onClick={() => remove(name)}
                                />
                              </Space>
                            ))}
                            <Form.Item>
                              <Button 
                                type="dashed" 
                                onClick={() => add()} 
                                block 
                                icon={<span role="img" aria-label="plus">â•</span>}
                              >
                                æ·»åŠ æ ‡ç­¾æ˜ å°„
                              </Button>
                            </Form.Item>
                          </>
                        )}
                      </Form.List>
                    </div>
                  </Form.Item>
                  
                  <Form.Item
                    name="aiPreview"
                    label="AIå†…å®¹é¢„è§ˆ"
                    dependencies={['useAIContent', 'aiContentType', 'textPrompt', 'useVoice', 'voiceType', 'fixedVoice']}
                    style={{ display: formState.useAIContent ? 'block' : 'none' }}
                  >
                    <div className="border border-dashed border-gray-300 rounded-md p-4 bg-gray-50">
                      <div className="mb-2">
                        <Text strong>å†…å®¹é¢„è§ˆï¼š</Text>
                      </div>
                      <div>
                        {formState.aiContentType === 'text' && (
                          <div>
                            <div className="mb-2">
                              <Text>ç”Ÿæˆçš„æ–‡æ¡ˆå°†æ˜¾ç¤ºåœ¨è¿™é‡Œï¼š</Text>
                            </div>
                            <div className="bg-blue-50 p-3 rounded-md">
                              {formState.textPrompt ? (
                                <Paragraph>
                                  æ ¹æ®æ‚¨çš„æç¤ºè¯ï¼š"{formState.textPrompt}"ï¼Œ
                                  å°†ç”Ÿæˆä¸ªæ€§åŒ–æ–‡æ¡ˆï¼Œå¹¶æ’å…¥æ ‡ç­¾å†…å®¹ã€‚
                                </Paragraph>
                              ) : (
                                <Text type="secondary">è¯·å¡«å†™æ–‡æ¡ˆæç¤ºè¯æŸ¥çœ‹é¢„è§ˆ</Text>
                              )}
                              
                              {formState.useVoice && (
                                <div className="mt-2">
                                  <Tag color="blue">
                                    {formState.voiceType === 'fixed' ? 
                                      `å°†ä½¿ç”¨å›ºå®šéŸ³è‰²ï¼š${formState.fixedVoice || 'è¯·é€‰æ‹©éŸ³è‰²'}` : 
                                      'å°†æ ¹æ®ç”¨æˆ·å±æ€§æ™ºèƒ½åŒ¹é…é€‚åˆçš„æ–¹è¨€æˆ–éŸ³è‰²'}
                                  </Tag>
                                </div>
                              )}
                            </div>
                          </div>
                        )}
                        
                        {formState.aiContentType === 'image' && (
                          <div className="text-center">
                            <div className="w-[200px] h-[150px] bg-blue-50 flex items-center justify-center mx-auto rounded-md">
                              <div className="text-blue-500 flex flex-col items-center">
                                <svg className="w-10 h-10 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                  xmlns="http://www.w3.org/2000/svg">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <Text type="secondary">AIç”Ÿæˆçš„å›¾ç‰‡å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</Text>
                              </div>
                            </div>
                          </div>
                        )}
                        
                        {formState.aiContentType === 'video' && (
                          <div className="text-center">
                            <div className="w-[300px] h-[180px] bg-blue-50 flex items-center justify-center mx-auto rounded-md">
                              <div className="text-blue-500 flex flex-col items-center">
                                <svg className="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                  xmlns="http://www.w3.org/2000/svg">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                    d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <Text type="secondary">AIç”Ÿæˆçš„è§†é¢‘å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</Text>
                              </div>
                            </div>
                          </div>
                        )}
                      </div>
                    </div>
                  </Form.Item>
                </Form>
              </React.Fragment>
            )}
          </Modal>
        </div>
      );
    };
    
    // é¡µé¢é¢„è§ˆ
    const PagePreview = () => {
      const [pages, setPages] = React.useState([
        { id: 1, name: 'ç”Ÿæ—¥ç¥ç¦ä¼šåœº', components: [
          { id: 1, name: 'ä¸ªäººä¿¡æ¯ç»„ä»¶', type: 'PROFILE' },
          { id: 2, name: 'ç…§ç‰‡ç›¸å†Œ', type: 'GALLERY' },
          { id: 3, name: 'ç•™è¨€æ¿', type: 'MESSAGE_BOARD' }
        ], status: 'published' },
        { id: 2, name: 'æ¯•ä¸šçºªå¿µä¼šåœº', components: [
          { id: 1, name: 'ä¸ªäººä¿¡æ¯ç»„ä»¶', type: 'PROFILE' },
          { id: 4, name: 'è§†é¢‘æ’­æ”¾', type: 'VIDEO' },
          { id: 3, name: 'ç•™è¨€æ¿', type: 'MESSAGE_BOARD' }
        ], status: 'draft' }
      ]);
      
      const [selectedPage, setSelectedPage] = React.useState(null);
      const [previewVisible, setPreviewVisible] = React.useState(false);
      
      // é¢„è§ˆé¡µé¢
      const previewPage = (record) => {
        setSelectedPage(record);
        setPreviewVisible(true);
      };
      
      const columns = [
        {
          title: 'é¡µé¢åç§°',
          dataIndex: 'name',
          key: 'name',
        },
        {
          title: 'çŠ¶æ€',
          key: 'status',
          dataIndex: 'status',
          render: status => (
            <Tag color={status === 'published' ? 'green' : 'blue'}>
              {status === 'published' ? 'å·²å‘å¸ƒ' : 'è‰ç¨¿'}
            </Tag>
          ),
        },
        {
          title: 'æ“ä½œ',
          key: 'action',
          render: (_, record) => (
            <Space size="middle">
              <a onClick={() => previewPage(record)}>é¢„è§ˆ</a>
            </Space>
          ),
        },
      ];
      
      return (
        <div className="component-container">
          <div className="flex justify-between items-center mb-4">
            <Title level={4}>é¡µé¢é¢„è§ˆ</Title>
          </div>
          <Paragraph>
            é¢„è§ˆé…ç½®å¥½çš„é¡µé¢ï¼ŒæŸ¥çœ‹åœ¨ç”¨æˆ·ç«¯çš„å‘ˆç°æ•ˆæœã€‚
          </Paragraph>
          <Table 
            dataSource={pages} 
            columns={columns} 
            rowKey="id" 
          />
          
          <Modal
            title={selectedPage ? `é¢„è§ˆï¼š${selectedPage.name}` : 'é¡µé¢é¢„è§ˆ'}
            open={previewVisible}
            onCancel={() => setPreviewVisible(false)}
            width={800}
            footer={[
              <Button key="close" onClick={() => setPreviewVisible(false)}>
                å…³é—­
              </Button>
            ]}
          >
            {selectedPage && (
              <div className="text-center">
                <div className="phone-frame">
                  <div className="phone-content">
                    <div className="p-4">
                      <div className="text-center mb-4">
                        <h1 className="text-2xl font-bold">{selectedPage.name}</h1>
                      </div>
                      
                      {selectedPage.components.map((component, index) => {
                        if (component.type === 'PROFILE') {
                          return (
                            <div key={index} className="bg-white rounded-lg shadow-md p-4 mb-4">
                              <div className="flex items-center">
                                <img 
                                  src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=120&h=120&q=80" 
                                  alt="ç”¨æˆ·å¤´åƒ" 
                                  className="w-20 h-20 rounded-full mr-4 object-cover"
                                />
                                <div>
                                  <h2 className="text-xl font-semibold">ç‹å°æ˜</h2>
                                  <div className="mt-2 p-3 bg-blue-50 rounded-md text-blue-600 text-sm">
                                    å—¨ï¼Œç‹å°æ˜ï¼çœ‹åˆ°ä½ å¯¹éŸ³ä¹å¾ˆæ„Ÿå…´è¶£ï¼Œå¸Œæœ›ä»Šå¤©è¿‡å¾—æ„‰å¿«ï¼
                                  </div>
                                </div>
                              </div>
                            </div>
                          );
                        } else if (component.type === 'GALLERY') {
                          return (
                            <div key={index} className="bg-white rounded-lg shadow-md p-4 mb-4">
                              <h2 className="text-xl font-semibold mb-3">ç…§ç‰‡ç›¸å†Œ</h2>
                              <div className="flex overflow-x-auto gap-2 pb-2">
                                <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" 
                                  alt="é£æ™¯ç…§" className="min-w-[120px] h-[120px] rounded object-cover" />
                                <img src="https://images.unsplash.com/photo-1510414842594-a61c69b5ae57?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" 
                                  alt="æµ·æ»©ç…§" className="min-w-[120px] h-[120px] rounded object-cover" />
                                <img src="https://images.unsplash.com/photo-1505144808419-1957a94ca61e?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" 
                                  alt="æ—¥è½ç…§" className="min-w-[120px] h-[120px] rounded object-cover" />
                                <img src="https://images.unsplash.com/photo-1528184039930-bd03972bd974?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" 
                                  alt="åŸå¸‚ç…§" className="min-w-[120px] h-[120px] rounded object-cover" />
                              </div>
                            </div>
                          );
                        } else if (component.type === 'MESSAGE_BOARD') {
                          return (
                            <div key={index} className="bg-white rounded-lg shadow-md p-4 mb-4">
                              <h2 className="text-xl font-semibold mb-3">ç•™è¨€æ¿</h2>
                              <div className="mb-4">
                                <div className="p-3 bg-gray-50 rounded mb-2">
                                  <span className="font-semibold">æåï¼š</span>
                                  <span>ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼</span>
                                </div>
                                <div className="p-3 bg-gray-50 rounded">
                                  <span className="font-semibold">å¼ ä¸‰ï¼š</span>
                                  <span>æ–°çš„ä¸€å¹´ç»§ç»­åŠ æ²¹ï¼</span>
                                </div>
                              </div>
                              <div className="flex">
                                <input type="text" placeholder="å†™ä¸‹æ‚¨çš„ç•™è¨€..." 
                                  className="flex-1 border border-gray-300 rounded-l px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                <button className="bg-blue-500 text-white px-4 py-2 rounded-r hover:bg-blue-600 transition-colors">
                                  å‘é€
                                </button>
                              </div>
                            </div>
                          );
                        } else if (component.type === 'VIDEO') {
                          return (
                            <div key={index} className="bg-white rounded-lg shadow-md p-4 mb-4">
                              <h2 className="text-xl font-semibold mb-3">è§†é¢‘æ’­æ”¾</h2>
                              <div className="w-full h-[200px] bg-gray-100 rounded flex items-center justify-center">
                                <div className="text-gray-500 flex flex-col items-center">
                                  <svg className="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                      d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                                      d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                  </svg>
                                  ç‚¹å‡»æ’­æ”¾è§†é¢‘
                                </div>
                              </div>
                            </div>
                          );
                        }
                        return null;
                      })}
                    </div>
                  </div>
                </div>
              </div>
            )}
          </Modal>
        </div>
      );
    };
    
    // AIå†…å®¹ç”Ÿæˆé…ç½®
    const AIContentConfiguration = () => {
      const [aiConfigs, setAiConfigs] = React.useState([
        { id: 1, name: 'ä¸ªæ€§åŒ–é—®å€™è¯­', type: 'TEXT', prompt: 'ä¸º{{å§“å}}åˆ›å»ºä¸€å¥ä¸ªæ€§åŒ–çš„é—®å€™è¯­ï¼Œè€ƒè™‘åˆ°ä»–çš„{{å…´è¶£}}' },
        { id: 2, name: 'å¤´åƒç”Ÿæˆ', type: 'IMAGE', prompt: 'ä¸º{{å§“å}}åˆ›å»ºä¸€ä¸ªå¡é€šå¤´åƒï¼Œé£æ ¼ä¸º{{é£æ ¼}}' },
        { id: 3, name: 'å­¦ä¹ è¿›åº¦è¯­éŸ³', type: 'AUDIO', prompt: 'ä¸º{{å§“å}}ç”Ÿæˆé¼“åŠ±è¯­éŸ³ï¼Œæåˆ°ä»–å·²ç»å®Œæˆäº†{{å­¦ä¹ è¿›åº¦}}%çš„è¯¾ç¨‹' }
      ]);
      
      const [editModalVisible, setEditModalVisible] = React.useState(false);
      const [testModalVisible, setTestModalVisible] = React.useState(false);
      const [currentConfig, setCurrentConfig] = React.useState(null);
      const [form] = Form.useForm();
      const [testResult, setTestResult] = React.useState(null);
      
      // æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†
      const showEditModal = (record) => {
        setCurrentConfig(record);
        setEditModalVisible(true);
        setTimeout(() => {
          form.setFieldsValue(record);
        }, 0);
      };
      
      // æµ‹è¯•AIç”Ÿæˆ
      const showTestModal = (record) => {
        setCurrentConfig(record);
        setTestModalVisible(true);
        setTestResult(null);
      };
      
      // æ‰§è¡Œæµ‹è¯•
      const runTest = (values) => {
        // æ¨¡æ‹Ÿæµ‹è¯•ç»“æœ
        setTestResult('æ­£åœ¨ç”Ÿæˆ...');
        
        setTimeout(() => {
          if (currentConfig.type === 'TEXT') {
            setTestResult(`å—¨ï¼Œ${values.å§“å}ï¼çœ‹åˆ°ä½ å¯¹${values.å…´è¶£}å¾ˆæ„Ÿå…´è¶£ï¼Œå¸Œæœ›ä»Šå¤©è¿‡å¾—æ„‰å¿«ï¼`);
          } else if (currentConfig.type === 'IMAGE') {
            setTestResult('å›¾ç‰‡ç”Ÿæˆç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ');
          } else if (currentConfig.type === 'AUDIO') {
            setTestResult(`è¯­éŸ³ç”Ÿæˆç»“æœï¼šæ­å–œ${values.å§“å}å·²ç»å®Œæˆäº†${values.å­¦ä¹ è¿›åº¦}%çš„è¯¾ç¨‹ï¼Œç»§ç»­åŠ æ²¹ï¼`);
          }
        }, 1500);
      };
      
      // åˆ é™¤é…ç½®
      const deleteConfig = (id) => {
        Modal.confirm({
          title: 'ç¡®è®¤åˆ é™¤',
          content: 'ç¡®å®šè¦åˆ é™¤æ­¤AIå†…å®¹ç”Ÿæˆé…ç½®å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ã€‚',
          okText: 'ç¡®è®¤',
          cancelText: 'å–æ¶ˆ',
          onOk: () => {
            const newConfigs = aiConfigs.filter(item => item.id !== id);
            setAiConfigs(newConfigs);
            message.success('é…ç½®å·²åˆ é™¤');
          }
        });
      };
      
      // æ·»åŠ æ–°é…ç½®
      const handleAddConfig = () => {
        setCurrentConfig(null);
        form.resetFields();
        setEditModalVisible(true);
      };
      
      // ä¿å­˜é…ç½®
      const handleSaveConfig = () => {
        form.validateFields().then(values => {
          if (currentConfig) {
            // æ›´æ–°ç°æœ‰é…ç½®
            const newConfigs = aiConfigs.map(item => 
              item.id === currentConfig.id ? { ...item, ...values } : item
            );
            setAiConfigs(newConfigs);
            message.success('é…ç½®å·²æ›´æ–°');
          } else {
            // åˆ›å»ºæ–°é…ç½®
            const newConfig = {
              id: aiConfigs.length > 0 ? Math.max(...aiConfigs.map(item => item.id)) + 1 : 1,
              ...values
            };
            setAiConfigs([...aiConfigs, newConfig]);
            message.success('é…ç½®å·²åˆ›å»º');
          }
          setEditModalVisible(false);
        });
      };
      
      const columns = [
        {
          title: 'åç§°',
          dataIndex: 'name',
          key: 'name',
        },
        {
          title: 'ç±»å‹',
          dataIndex: 'type',
          key: 'type',
          render: type => {
            const colorMap = {
              'TEXT': 'blue',
              'IMAGE': 'green',
              'AUDIO': 'purple'
            };
            return <Tag color={colorMap[type]}>{type}</Tag>;
          }
        },
        {
          title: 'Prompt',
          dataIndex: 'prompt',
          key: 'prompt',
          ellipsis: true
        },
        {
          title: 'æ“ä½œ',
          key: 'action',
          render: (_, record) => (
            <Space size="middle">
              <a onClick={() => showEditModal(record)}>ç¼–è¾‘</a>
              <a onClick={() => showTestModal(record)}>æµ‹è¯•</a>
              <a onClick={() => deleteConfig(record.id)}>åˆ é™¤</a>
            </Space>
          ),
        },
      ];
      
      // ä»promptä¸­æå–æ ‡ç­¾
      const extractTags = (prompt) => {
        const regex = /\{\{([^}]+)\}\}/g;
        const tags = [];
        let match;
        
        while ((match = regex.exec(prompt)) !== null) {
          tags.push(match[1]);
        }
        
        return tags;
      };
      
      return (
        <div className="component-container">
          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 16 }}>
            <Title level={4}>AIå†…å®¹ç”Ÿæˆé…ç½®</Title>
            <Button type="primary" onClick={handleAddConfig}>æ–°å»ºé…ç½®</Button>
          </div>
          <Paragraph>
            AIå†…å®¹ç”Ÿæˆé…ç½®ç”¨äºè®¾ç½®ç”Ÿæˆä¸ªæ€§åŒ–çš„æ–‡å­—ã€å›¾ç‰‡å’ŒéŸ³é¢‘å†…å®¹çš„è§„åˆ™ã€‚
          </Paragraph>
          <Table 
            dataSource={aiConfigs} 
            columns={columns} 
            rowKey="id" 
          />
          
          {/* ç¼–è¾‘æ¨¡æ€æ¡† */}
          <Modal
            title={currentConfig ? "ç¼–è¾‘AIå†…å®¹ç”Ÿæˆé…ç½®" : "æ–°å»ºAIå†…å®¹ç”Ÿæˆé…ç½®"}
            open={editModalVisible}
            onCancel={() => setEditModalVisible(false)}
            onOk={handleSaveConfig}
            destroyOnClose={true}
          >
            <Form
              form={form}
              layout="vertical"
            >
              <Form.Item
                name="name"
                label="é…ç½®åç§°"
                rules={[{ required: true, message: 'è¯·è¾“å…¥é…ç½®åç§°' }]}
              >
                <Input placeholder="è¯·è¾“å…¥é…ç½®åç§°" />
              </Form.Item>
              <Form.Item
                name="type"
                label="å†…å®¹ç±»å‹"
                rules={[{ required: true, message: 'è¯·é€‰æ‹©å†…å®¹ç±»å‹' }]}
              >
                <Select placeholder="è¯·é€‰æ‹©å†…å®¹ç±»å‹">
                  <Option value="TEXT">æ–‡æœ¬</Option>
                  <Option value="IMAGE">å›¾ç‰‡</Option>
                  <Option value="AUDIO">éŸ³é¢‘</Option>
                </Select>
              </Form.Item>
              <Form.Item
                name="prompt"
                label="Promptæ¨¡æ¿"
                rules={[{ required: true, message: 'è¯·è¾“å…¥Promptæ¨¡æ¿' }]}
                extra="ä½¿ç”¨ {{æ ‡ç­¾å}} è¡¨ç¤ºå˜é‡ï¼Œä¾‹å¦‚: ä¸º{{å§“å}}åˆ›å»ºä¸€å¥é—®å€™è¯­"
              >
                <Input.TextArea rows={4} placeholder="è¯·è¾“å…¥Promptæ¨¡æ¿" />
              </Form.Item>
            </Form>
          </Modal>
          
          {/* æµ‹è¯•æ¨¡æ€æ¡† */}
          <Modal
            title={`æµ‹è¯•AIå†…å®¹ç”Ÿæˆ: ${currentConfig?.name || ''}`}
            open={testModalVisible}
            onCancel={() => setTestModalVisible(false)}
            footer={[
              <Button key="close" onClick={() => setTestModalVisible(false)}>
                å…³é—­
              </Button>
            ]}
            width={600}
          >
            {currentConfig && (
              <React.Fragment>
                <Paragraph>
                  <Text strong>Promptæ¨¡æ¿:</Text> {currentConfig.prompt}
                </Paragraph>
                
                <Divider>æµ‹è¯•å‚æ•°</Divider>
                
                <Form
                  onFinish={runTest}
                  layout="vertical"
                >
                  {extractTags(currentConfig.prompt).map(tag => (
                    <Form.Item
                      key={tag}
                      name={tag}
                      label={tag}
                      rules={[{ required: true, message: `è¯·è¾“å…¥${tag}` }]}
                    >
                      <Input placeholder={`è¯·è¾“å…¥${tag}`} />
                    </Form.Item>
                  ))}
                  
                  <Form.Item>
                    <Button type="primary" htmlType="submit">
                      ç”Ÿæˆ
                    </Button>
                  </Form.Item>
                </Form>
                
                {testResult && (
                  <React.Fragment>
                    <Divider>ç”Ÿæˆç»“æœ</Divider>
                    {currentConfig.type === 'TEXT' && (
                      <div className="bg-blue-50 p-4 rounded-md text-blue-800">
                        {testResult}
                      </div>
                    )}
                    {currentConfig.type === 'IMAGE' && (
                      <div className="h-[200px] bg-gray-50 border border-dashed border-gray-300 rounded-md flex items-center justify-center">
                        <div className="text-center">
                          <svg className="w-12 h-12 mx-auto mb-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                            xmlns="http://www.w3.org/2000/svg">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                              d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                          </svg>
                          <p className="text-gray-600">{testResult}</p>
                        </div>
                      </div>
                    )}
                    {currentConfig.type === 'AUDIO' && (
                      <div className="bg-indigo-50 p-4 rounded-md text-indigo-800 flex items-center">
                        <svg className="w-8 h-8 mr-3 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" 
                          xmlns="http://www.w3.org/2000/svg">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" 
                            d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                        </svg>
                        <p>{testResult}</p>
                      </div>
                    )}
                  </React.Fragment>
                )}
              </React.Fragment>
            )}
          </Modal>
        </div>
      );
    };
    
    // æ¸²æŸ“åº”ç”¨
    ReactDOM.render(<App />, document.getElementById('app'));
  </script>
</body>
</html>